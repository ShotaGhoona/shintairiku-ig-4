# GitHub Actionsæ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å–å¾—å®Ÿè£…æˆ¦ç•¥

**ä½œæˆæ—¥**: 2025-06-25  
**ç›®çš„**: Instagram API ã‚’ä½¿ç”¨ã—ãŸæ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å–å¾—ã®è‡ªå‹•åŒ–å®Ÿè£…è¨ˆç”»  
**å®Ÿè¡Œç’°å¢ƒ**: GitHub Actions + Supabase PostgreSQL  

---

## ğŸ“‹ å®Ÿè£…æˆ¦ç•¥æ¦‚è¦

### åŸºæœ¬æ–¹é‡
- **GitHub Actions**: å®šæœŸå®Ÿè¡Œã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†
- **Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
- **Supabase**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
- **ç’°å¢ƒå¤‰æ•°**: æ©Ÿå¯†æƒ…å ±ã®å®‰å…¨ãªç®¡ç†
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å …ç‰¢ãªéšœå®³å¯¾å¿œ

### å®Ÿè¡Œé »åº¦
- **æ—¥æ¬¡å®Ÿè¡Œ**: æ¯æ—¥ 06:00 JST (21:00 UTC)
- **æ‰‹å‹•å®Ÿè¡Œ**: å¿…è¦æ™‚ã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼
- **ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½**: ã‚¨ãƒ©ãƒ¼æ™‚ã®è‡ªå‹•å†å®Ÿè¡Œ

---

## ğŸ—ï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®

```
instagram-analysis-4/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ daily-data-collection.yml          # ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚       â””â”€â”€ test-data-collection.yml           # ãƒ†ã‚¹ãƒˆç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ data-collection/
â”‚       â”œâ”€â”€ main.py                             # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ instagram_api_client.py             # Instagram API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ database_manager.py                 # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
â”‚       â”œâ”€â”€ data_aggregator.py                  # ãƒ‡ãƒ¼ã‚¿é›†ç´„å‡¦ç†
â”‚       â”œâ”€â”€ error_handler.py                    # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚       â””â”€â”€ config.py                           # è¨­å®šç®¡ç†
â”‚
â”œâ”€â”€ requirements/
â”‚   â””â”€â”€ data-collection.txt                    # Pythonä¾å­˜é–¢ä¿‚
â”‚
â””â”€â”€ docs/
    â””â”€â”€ operations/
        â”œâ”€â”€ data-collection-runbook.md         # é‹ç”¨ã‚¬ã‚¤ãƒ‰
        â””â”€â”€ troubleshooting.md                 # ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
```

---

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥å®Ÿè£…å†…å®¹

### 1. GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

#### `.github/workflows/daily-data-collection.yml`
```yaml
# å½¹å‰²: æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å–å¾—ã®è‡ªå‹•å®Ÿè¡Œ
# æ©Ÿèƒ½:
# - å®šæœŸå®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« (cron)
# - æ‰‹å‹•å®Ÿè¡Œãƒˆãƒªã‚¬ãƒ¼
# - Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# - ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
# - ã‚¨ãƒ©ãƒ¼é€šçŸ¥

# å®Ÿè£…å†…å®¹:
# - Python 3.11 ç’°å¢ƒæ§‹ç¯‰
# - ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# - ç’°å¢ƒå¤‰æ•°è¨­å®š
# - ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
# - Slacké€šçŸ¥ (æˆåŠŸ/å¤±æ•—)
```

#### `.github/workflows/test-data-collection.yml`
```yaml
# å½¹å‰²: ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
# æ©Ÿèƒ½:
# - ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ
# - ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ã®æ¤œè¨¼
# - ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§ã®å‹•ä½œç¢ºèª
```

### 2. Python ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### `scripts/data-collection/main.py`
```python
# å½¹å‰²: ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
# æ©Ÿèƒ½:
# - å…¨ä½“ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
# - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§ã®å–å¾—
# - å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿åé›†å®Ÿè¡Œ
# - çµæœã‚µãƒãƒªãƒ¼ã®å‡ºåŠ›
# - ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è¨˜éŒ²

# ä¸»è¦å‡¦ç†:
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
# 2. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªInstagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—
# 3. å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿åé›†
# 4. æœˆæ¬¡ã‚µãƒãƒªãƒ¼æ›´æ–° (æœˆæœ«ã®ã¿)
# 5. å®Ÿè¡Œçµæœãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```

#### `scripts/data-collection/instagram_api_client.py`
```python
# å½¹å‰²: Instagram Graph API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
# æ©Ÿèƒ½:
# - APIèªè¨¼ç®¡ç†
# - ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ
# - å„ç¨®ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰
# - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

# ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:
# - get_basic_account_data()     # åŸºæœ¬ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
# - get_insights_metrics()       # Insights API ãƒ‡ãƒ¼ã‚¿
# - get_posts_for_date()         # æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿å–å¾—
# - get_post_metrics()           # æŠ•ç¨¿ãƒ¡ãƒˆãƒªã‚¯ã‚¹
# - handle_rate_limit()          # ãƒ¬ãƒ¼ãƒˆåˆ¶é™å‡¦ç†
```

#### `scripts/data-collection/database_manager.py`
```python
# å½¹å‰²: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œç®¡ç†
# æ©Ÿèƒ½:
# - Supabaseæ¥ç¶šç®¡ç†
# - CRUDæ“ä½œ
# - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
# - ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

# ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:
# - get_active_accounts()        # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—
# - save_daily_stats()           # æ—¥æ¬¡çµ±è¨ˆä¿å­˜
# - save_post_data()             # æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜
# - save_post_metrics()          # æŠ•ç¨¿ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜
# - generate_monthly_summary()   # æœˆæ¬¡ã‚µãƒãƒªãƒ¼ç”Ÿæˆ
```

#### `scripts/data-collection/data_aggregator.py`
```python
# å½¹å‰²: ãƒ‡ãƒ¼ã‚¿é›†ç´„ãƒ»è¨ˆç®—å‡¦ç†
# æ©Ÿèƒ½:
# - æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã®æ—¥åˆ¥é›†ç´„
# - ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡è¨ˆç®—
# - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—åˆ†å¸ƒç®—å‡º
# - ãƒ‡ãƒ¼ã‚¿å“è³ªã‚¹ã‚³ã‚¢è¨ˆç®—

# ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:
# - aggregate_daily_posts()      # æ—¥åˆ¥æŠ•ç¨¿é›†ç´„
# - calculate_engagement_rate()  # ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡
# - calculate_data_quality()     # ãƒ‡ãƒ¼ã‚¿å“è³ªã‚¹ã‚³ã‚¢
# - format_media_distribution()  # ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—åˆ†å¸ƒ
```

#### `scripts/data-collection/error_handler.py`
```python
# å½¹å‰²: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚°ç®¡ç†
# æ©Ÿèƒ½:
# - ä¾‹å¤–å‡¦ç†ã®çµ±ä¸€åŒ–
# - ãƒ­ã‚°å‡ºåŠ›ç®¡ç†
# - ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
# - é€šçŸ¥ç®¡ç†

# ä¸»è¦æ©Ÿèƒ½:
# - API ã‚¨ãƒ©ãƒ¼ã®åˆ†é¡ãƒ»å‡¦ç†
# - ãƒ¬ãƒ¼ãƒˆåˆ¶é™æ™‚ã®å¾…æ©Ÿå‡¦ç†
# - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼å¯¾å¿œ
# - Slacké€šçŸ¥é€ä¿¡
```

#### `scripts/data-collection/config.py`
```python
# å½¹å‰²: è¨­å®šãƒ»å®šæ•°ç®¡ç†
# æ©Ÿèƒ½:
# - ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿
# - APIè¨­å®šå€¤ã®ç®¡ç†
# - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šè¨­å®š
# - ãƒ­ã‚°è¨­å®š

# è¨­å®šé …ç›®:
# - Instagram API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
# - ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­å®š
# - ãƒªãƒˆãƒ©ã‚¤è¨­å®š
# - ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š
```

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼è©³ç´°

### ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```mermaid
flowchart TD
    A[GitHub Actions ãƒˆãƒªã‚¬ãƒ¼] --> B[Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—]
    B --> C[ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿]
    C --> D[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š]
    D --> E[ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—]
    E --> F{ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§}
    
    F --> G[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ1å‡¦ç†]
    F --> H[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ2å‡¦ç†]
    F --> I[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆNå‡¦ç†]
    
    G --> J[åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å–å¾—]
    H --> J
    I --> J
    
    J --> K[Insights API å‘¼ã³å‡ºã—]
    K --> L[æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»é›†ç´„]
    L --> M[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜]
    M --> N[æ¬¡ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ]
    
    N --> O{å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå®Œäº†?}
    O -->|No| F
    O -->|Yes| P[æœˆæ¬¡ã‚µãƒãƒªãƒ¼æ›´æ–°]
    P --> Q[å®Ÿè¡Œçµæœãƒ¬ãƒãƒ¼ãƒˆ]
    Q --> R[Slacké€šçŸ¥]
    R --> S[å®Œäº†]
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ•ãƒ­ãƒ¼
```mermaid
flowchart TD
    A[APIå‘¼ã³å‡ºã—] --> B{æˆåŠŸ?}
    B -->|Yes| C[ãƒ‡ãƒ¼ã‚¿å‡¦ç†]
    B -->|No| D{ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š}
    
    D --> E[ãƒ¬ãƒ¼ãƒˆåˆ¶é™]
    D --> F[èªè¨¼ã‚¨ãƒ©ãƒ¼]
    D --> G[ãã®ä»–ã‚¨ãƒ©ãƒ¼]
    
    E --> H[å¾…æ©Ÿæ™‚é–“è¨ˆç®—]
    H --> I[æŒ‡å®šæ™‚é–“å¾…æ©Ÿ]
    I --> J{ãƒªãƒˆãƒ©ã‚¤å›æ•° < 3?}
    J -->|Yes| A
    J -->|No| K[ã‚¹ã‚­ãƒƒãƒ—ãƒ»ãƒ­ã‚°è¨˜éŒ²]
    
    F --> L[ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°]
    L --> A
    
    G --> M{é‡è¦åº¦åˆ¤å®š}
    M -->|Critical| N[å‡¦ç†ä¸­æ–­ãƒ»é€šçŸ¥]
    M -->|Warning| K
    
    K --> O[æ¬¡ã®å‡¦ç†ç¶™ç¶š]
    C --> O
    N --> P[ã‚¨ãƒ©ãƒ¼çµ‚äº†]
```

---

## ğŸ” ç’°å¢ƒå¤‰æ•°ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

### GitHub Secrets
```yaml
# Instagram API
INSTAGRAM_ACCESS_TOKENS: '[{"account_id": "xxx", "token": "yyy"}, ...]'
FACEBOOK_APP_ID: 'your_app_id'
FACEBOOK_APP_SECRET: 'your_app_secret'

# Database
SUPABASE_URL: 'https://xxx.supabase.co'
SUPABASE_KEY: 'your_supabase_anon_key'
DATABASE_URL: 'postgresql://...'

# Notifications
SLACK_WEBHOOK_URL: 'https://hooks.slack.com/...'

# Encryption
DATA_ENCRYPTION_KEY: 'your_32_byte_key'
```

### ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨æ–¹æ³•
```python
# config.py ã§ã®èª­ã¿è¾¼ã¿ä¾‹
import os
import json

class Config:
    # Instagram API
    INSTAGRAM_TOKENS = json.loads(os.getenv('INSTAGRAM_ACCESS_TOKENS', '[]'))
    FACEBOOK_APP_ID = os.getenv('FACEBOOK_APP_ID')
    FACEBOOK_APP_SECRET = os.getenv('FACEBOOK_APP_SECRET')
    
    # Database
    DATABASE_URL = os.getenv('DATABASE_URL')
    
    # Rate Limiting
    API_RATE_LIMIT = 200  # calls per hour
    RETRY_MAX_ATTEMPTS = 3
    RETRY_DELAY_BASE = 60  # seconds
```

---

## ğŸ“Š ãƒ­ã‚°ãƒ»ç›£è¦–æˆ¦ç•¥

### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
```python
# ãƒ­ã‚°è¨­å®š
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

# ãƒ­ã‚°å‡ºåŠ›ä¾‹
logger.info(f"Started data collection for account: {username}")
logger.warning(f"Rate limit hit for account: {username}, waiting...")
logger.error(f"Failed to fetch data for account: {username}, error: {error}")
```

### Slacké€šçŸ¥
```python
# æˆåŠŸé€šçŸ¥
{
    "text": "âœ… Daily data collection completed",
    "blocks": [
        {
            "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "*Accounts processed:* 5/5\n*Total API calls:* 15\n*Duration:* 2m 34s"
            }
        }
    ]
}

# ã‚¨ãƒ©ãƒ¼é€šçŸ¥
{
    "text": "âŒ Daily data collection failed",
    "blocks": [
        {
            "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "*Error:* Rate limit exceeded\n*Account:* @example_account\n*Action:* Check API usage"
            }
        }
    ]
}
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```python
# tests/test_instagram_api_client.py
def test_get_basic_account_data():
    # ãƒ¢ãƒƒã‚¯APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆ
    
def test_rate_limit_handling():
    # ãƒ¬ãƒ¼ãƒˆåˆ¶é™æ™‚ã®é©åˆ‡ãªå‡¦ç†ãƒ†ã‚¹ãƒˆ
    
def test_error_handling():
    # å„ç¨®ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®å‡¦ç†ãƒ†ã‚¹ãƒˆ
```

### çµ±åˆãƒ†ã‚¹ãƒˆ
```python
# tests/test_data_collection_flow.py
def test_daily_collection_flow():
    # ã‚µãƒ³ãƒ—ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®å…¨ä½“ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
    
def test_database_operations():
    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã®çµ±åˆãƒ†ã‚¹ãƒˆ
```

### GitHub Actions ãƒ†ã‚¹ãƒˆ
```yaml
# ãƒ†ã‚¹ãƒˆç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
# - ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚å®Ÿè¡Œ
# - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§ã®å‹•ä½œç¢ºèª
# - ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
```

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ä¸¦è¡Œå‡¦ç†
```python
# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸¦è¡Œå‡¦ç†ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™è€ƒæ…®ï¼‰
import asyncio
from concurrent.futures import ThreadPoolExecutor

async def process_accounts_parallel(accounts):
    # æœ€å¤§3ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåŒæ™‚å‡¦ç†ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œï¼‰
    semaphore = asyncio.Semaphore(3)
    
    async def process_account_with_limit(account):
        async with semaphore:
            return await process_account(account)
    
    tasks = [process_account_with_limit(acc) for acc in accounts]
    return await asyncio.gather(*tasks, return_exceptions=True)
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
```python
# é‡è¤‡APIå‘¼ã³å‡ºã—é˜²æ­¢
from functools import lru_cache
from datetime import datetime, timedelta

@lru_cache(maxsize=100)
def get_account_data_cached(account_id, date_key):
    # åŒæ—¥ã®é‡è¤‡å–å¾—é˜²æ­¢
    return get_account_data(account_id)
```

---

## ğŸš€ å®Ÿè£…é †åº

### Phase 1: åŸºæœ¬å®Ÿè£… (1é€±é–“)
1. **GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼** - åŸºæœ¬çš„ãªå®šæœŸå®Ÿè¡Œ
2. **main.py** - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
3. **instagram_api_client.py** - åŸºæœ¬APIå‘¼ã³å‡ºã—
4. **database_manager.py** - åŸºæœ¬çš„ãªDBæ“ä½œ
5. **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ** - 1ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®å‹•ä½œç¢ºèª

### Phase 2: æ©Ÿèƒ½æ‹¡å¼µ (1é€±é–“)
1. **data_aggregator.py** - ãƒ‡ãƒ¼ã‚¿é›†ç´„å‡¦ç†
2. **error_handler.py** - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
3. **è¤‡æ•°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œ** - ä¸¦è¡Œå‡¦ç†å®Ÿè£…
4. **Slacké€šçŸ¥** - å®Ÿè¡Œçµæœé€šçŸ¥

### Phase 3: é‹ç”¨å®‰å®šåŒ– (1é€±é–“)
1. **ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–** - å˜ä½“ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ
2. **ãƒ­ã‚°ãƒ»ç›£è¦–** - è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›
3. **ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯** - éšœå®³æ™‚ã®è‡ªå‹•å¾©æ—§
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** - é‹ç”¨ã‚¬ã‚¤ãƒ‰ä½œæˆ

### Phase 4: æœ€é©åŒ– (1é€±é–“)
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹èª¿æ•´** - ä¸¦è¡Œå‡¦ç†æœ€é©åŒ–
2. **æœˆæ¬¡å‡¦ç†** - æœˆæœ«ã®è‡ªå‹•ã‚µãƒãƒªãƒ¼ç”Ÿæˆ
3. **ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½** - ç•°å¸¸å€¤æ¤œçŸ¥
4. **é‹ç”¨ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** - å®Ÿè¡ŒçŠ¶æ³å¯è¦–åŒ–

---

## ğŸ“‹ é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰ç¢ºèª
- [ ] å…¨ç’°å¢ƒå¤‰æ•°ã®è¨­å®šå®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®æˆåŠŸç¢ºèª
- [ ] Slacké€šçŸ¥ã®å‹•ä½œç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª
- [ ] API ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æ€§ç¢ºèª

### æ—¥æ¬¡ç›£è¦–é …ç›®
- [ ] ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒçŠ¶æ³
- [ ] APIä½¿ç”¨é‡ (200ã‚³ãƒ¼ãƒ«/æ™‚é–“ä»¥å†…)
- [ ] ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸç‡
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®¹é‡

### é€±æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- [ ] API ãƒˆãƒ¼ã‚¯ãƒ³ã®æœŸé™ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒãƒ¼ãƒˆç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼å‚¾å‘åˆ†æ

---

ã“ã®æˆ¦ç•¥ã«ã‚ˆã‚Šã€**å …ç‰¢ã§ä¿å®ˆã—ã‚„ã™ã„æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ **ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚å®Ÿè£…ã¯æ®µéšçš„ã«é€²ã‚ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§å‹•ä½œç¢ºèªã‚’è¡Œã„ãªãŒã‚‰æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ã¦ã„ãã¾ã™ã€‚